"use strict";(()=>{var e={};e.id=63,e.ids=[63,220],e.modules={179:e=>{e.exports=require("@mui/utils/useSlotProps")},361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},642:e=>{e.exports=require("@mui/utils/mergeSlotProps")},646:e=>{e.exports=require("@mui/utils/resolveProps")},710:e=>{e.exports=require("@mui/utils/useTimeout")},729:e=>{e.exports=require("@mui/utils/elementAcceptingRef")},802:e=>{e.exports=import("clsx")},985:e=>{e.exports=require("@mui/utils/formatMuiErrorMessage")},1096:e=>{e.exports=require("@mui/system/Grid")},1112:e=>{e.exports=require("@mui/utils/createChainedFunction")},1119:e=>{e.exports=require("@mui/utils/generateUtilityClass")},1291:e=>{e.exports=require("@mui/utils/integerPropType")},1699:e=>{e.exports=require("@mui/utils/generateUtilityClasses")},1763:e=>{e.exports=require("@mui/utils/debounce")},1812:e=>{e.exports=require("@mui/utils/appendOwnerState")},1956:e=>{e.exports=require("@mui/utils/useEnhancedEffect")},2015:e=>{e.exports=require("react")},2263:(e,r,t)=>{t.d(r,{A:()=>o});var i=t(8905),s=t(8732);let o=(0,i.Ke)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},2326:e=>{e.exports=require("react-dom")},2507:(e,r,t)=>{t.d(r,{A:()=>o});var i=t(8905),s=t(8732);let o=(0,i.Ke)((0,s.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article")},3033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3310:e=>{e.exports=require("@mui/utils/useId")},3873:e=>{e.exports=require("path")},3889:e=>{e.exports=require("@mui/utils/useControlled")},4036:e=>{e.exports=require("@mui/utils/composeClasses")},4042:(e,r,t)=>{t.a(e,async(e,i)=>{try{t.r(r),t.d(r,{default:()=>w,getServerSideProps:()=>n.X});var s=t(8732),o=t(6438),a=t(8988),n=t(8664),l=t(7194),u=t(6443),d=t(1087),c=t(3169),p=t(8359),x=t(9918),m=t.n(x),f=t(2015),g=t.n(f),h=t(2263),j=t(2507),y=t(9299),A=t(9934),v=t(3194),q=e([o,a,A,u,d,c]);[o,a,A,u,d,c]=q.then?(await q)():q;let w=({blogs:e})=>{let[r,t]=g().useState(0),{user:i,setUser:n}=g().useContext(v.c),x=e.filter(e=>e.author?._id===i?._id),f=e.filter(e=>i?.favorites?.includes(e._id));return(0,s.jsxs)(l.A,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(a.A,{}),(0,s.jsxs)(u.A,{elevation:3,sx:{padding:3,marginTop:8,marginBottom:10,display:"flex",flexDirection:"row",width:"50%",margin:"40px auto",columnGap:4,backgroundColor:"#F0EBE3"},children:[(0,s.jsxs)(l.A,{sx:{backgroundColor:"#fff",padding:3,flex:1,maxWidth:"15%",display:"flex",flexDirection:"column",rowGap:2,alignItems:"flex-start"},children:[(0,s.jsx)(d.A,{variant:"h5",gutterBottom:!0,sx:{fontFamily:"Montserrat",fontSize:"1.5rem",marginBottom:2,marginTop:2,color:"#0c2d72"},children:"Min profil"}),(0,s.jsxs)(c.A,{onClick:()=>{t(0)},sx:{textTransform:"none",backgroundColor:0===r?"#f1f5f5":"transparent"},children:[(0,s.jsx)(h.A,{sx:{marginRight:1}}),(0,s.jsx)(d.A,{variant:"h5",gutterBottom:!0,sx:{fontFamily:"Montserrat",fontSize:"1.2rem",color:"#0c2d72"},children:"Redigera profil"})]}),(0,s.jsxs)(c.A,{onClick:()=>{t(1)},sx:{textTransform:"none",backgroundColor:1===r?"#f1f5f5":"transparent"},children:[(0,s.jsx)(j.A,{sx:{marginRight:1}}),(0,s.jsx)(d.A,{variant:"h5",gutterBottom:!0,sx:{fontFamily:"Montserrat",fontSize:"1.2rem",color:"#0c2d72"},children:"Mina inl\xe4gg"})]}),(0,s.jsxs)(c.A,{onClick:()=>{t(2)},sx:{textTransform:"none",backgroundColor:2===r?"#f1f5f5":"transparent"},children:[(0,s.jsx)(y.A,{sx:{marginRight:1}}),(0,s.jsx)(d.A,{variant:"h5",gutterBottom:!0,sx:{fontFamily:"Montserrat",fontSize:"1.2rem",color:"#0c2d72"},children:"Mina favoriter"})]}),(0,s.jsx)(c.A,{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/auth?isLoginPage=true"},sx:{textTransform:"none"},children:(0,s.jsx)(d.A,{variant:"h5",gutterBottom:!0,sx:{fontFamily:"Montserrat",fontSize:"1.2rem",color:"#0c2d72"},children:"Logga ut"})})]}),(0,s.jsxs)(l.A,{sx:{backgroundColor:"#fff",padding:3,flex:1,maxWidth:"85%"},children:[0===r&&i&&(0,s.jsx)(o.A,{user:i,setUser:n}),1===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)("h1",{children:"Mina Inl\xe4gg"}),(0,s.jsx)(c.A,{variant:"outlined",color:"primary",onClick:()=>{window.location.href="/add"},sx:{textTransform:"none",fontSize:"1rem",fontFamily:"Montserrat"},children:"Skapa nytt inl\xe4gg"})]}),(0,s.jsx)(p.A,{sx:{display:"flex",flexDirection:"column",rowGap:2,marginTop:2},children:x.map((e,r)=>(0,s.jsx)(m(),{href:`/blog/${e._id}`,style:{textDecoration:"none",color:"inherit"},children:(0,s.jsxs)(u.A,{elevation:3,sx:{padding:2,display:"flex",flexDirection:"column",columnGap:2,backgroundColor:"#F0EBE3",cursor:"pointer"},children:[(0,s.jsx)(l.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:(0,s.jsx)(d.A,{variant:"body2",color:"text.secondary",sx:{fontFamily:"Montserrat",color:"#0c2d72",fontWeight:400},children:new Date(e.createdAt).toLocaleDateString("sv-SE",{year:"numeric",month:"long",day:"numeric"})})}),(0,s.jsxs)(l.A,{sx:{display:"flex",flexDirection:"row",columnGap:2},children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,style:{width:"100px",height:"100px",borderRadius:"8px"}}),(0,s.jsxs)(l.A,{children:[(0,s.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:e.name}),(0,s.jsx)(d.A,{variant:"body1",gutterBottom:!0,children:e.description})]})]})]})},r))})]}),2===r&&(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsx)("h1",{children:"Mina favoriter"}),(0,s.jsx)(p.A,{sx:{display:"flex",flexDirection:"column",rowGap:2,marginTop:2},children:f.map((e,r)=>(0,s.jsx)(m(),{href:`/blog/${e._id}`,style:{textDecoration:"none",color:"inherit"},children:(0,s.jsxs)(u.A,{elevation:3,sx:{padding:2,display:"flex",flexDirection:"row",columnGap:2,backgroundColor:"#F0EBE3",cursor:"pointer"},children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,style:{width:"100px",height:"100px",borderRadius:"8px"}}),(0,s.jsxs)(l.A,{children:[(0,s.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:e.name}),(0,s.jsx)(d.A,{variant:"body1",gutterBottom:!0,children:e.description})]})]})},r))})]})]})]}),(0,s.jsx)(A.A,{})]})};i()}catch(e){i(e)}})},4075:e=>{e.exports=require("zlib")},4250:e=>{e.exports=require("@mui/utils/isFocusVisible")},4341:e=>{e.exports=require("@mui/utils/chainPropTypes")},4781:e=>{e.exports=require("@mui/system/colorManipulator")},4799:(e,r,t)=>{t.a(e,async(e,i)=>{try{t.r(r),t.d(r,{config:()=>g,default:()=>p,getServerSideProps:()=>f,getStaticPaths:()=>m,getStaticProps:()=>x,reportWebVitals:()=>h,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>q,unstable_getStaticParams:()=>A,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var s=t(3885),o=t(237),a=t(1413),n=t(9616),l=t.n(n),u=t(2081),d=t(4042),c=e([d]);d=(c.then?(await c)():c)[0];let p=(0,a.M)(d,"default"),x=(0,a.M)(d,"getStaticProps"),m=(0,a.M)(d,"getStaticPaths"),f=(0,a.M)(d,"getServerSideProps"),g=(0,a.M)(d,"config"),h=(0,a.M)(d,"reportWebVitals"),j=(0,a.M)(d,"unstable_getStaticProps"),y=(0,a.M)(d,"unstable_getStaticPaths"),A=(0,a.M)(d,"unstable_getStaticParams"),v=(0,a.M)(d,"unstable_getServerProps"),q=(0,a.M)(d,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:o.A.PAGES,page:"/profile",pathname:"/profile",bundlePath:"",filename:""},components:{App:u.default,Document:l()},userland:d});i()}catch(e){i(e)}})},4926:e=>{e.exports=require("@mui/utils/useEventCallback")},4956:e=>{e.exports=require("clsx")},5171:e=>{e.exports=require("@mui/utils/resolveComponentProps")},5206:e=>{e.exports=require("@mui/utils/useLazyRef")},5402:e=>{e.exports=require("@mui/utils/ownerDocument")},5928:e=>{e.exports=require("@mui/utils/deprecatedPropType")},6037:e=>{e.exports=require("mongoose")},6099:e=>{e.exports=require("@mui/system")},6362:e=>{e.exports=require("@mui/utils/getReactElementRef")},6438:(e,r,t)=>{t.a(e,async(e,i)=>{try{t.d(r,{A:()=>m});var s=t(8732),o=t(7194),a=t(3839),n=t(2571),l=t(7723),u=t(3169),d=t(3543),c=t(7855),p=t(2015),x=e([n,l,u,d,c]);[n,l,u,d,c]=x.then?(await x)():x;let m=({user:e,setUser:r})=>{let[t,i]=(0,p.useState)({firstName:e?.firstName||"",lastName:e?.lastName||"",userName:e?.userName||"",email:e?.email||"",imageUrl:e?.imageUrl||"",password:e?.password||"",newPassword:"",confirmPassword:""}),[x,m]=(0,p.useState)(null),[f,g]=(0,p.useState)(null),[h,j]=(0,p.useState)(!1),[y,A]=(0,p.useState)("");(0,p.useEffect)(()=>{console.log("EditProfile user:",e)},[e]);let v=e=>{let{name:r,value:t}=e.target;i(e=>({...e,[r]:t}))},q=async i=>{if(i.preventDefault(),A("Updatering..."),!t.password){console.log("Nuvarande l\xf6senord kr\xe4vs"),A("Nuvarande l\xf6senord kr\xe4vs"),j(!0);return}if(t.newPassword!==t.confirmPassword){console.log("Nya l\xf6senordet matchar inte bekr\xe4ftelsen"),A("Nya l\xf6senordet matchar inte bekr\xe4ftelsen"),j(!0);return}try{let i=new FormData;i.append("firstName",t.firstName),i.append("lastName",t.lastName),i.append("userName",t.userName),i.append("email",t.email),i.append("password",t.newPassword?t.newPassword:t.password),x&&i.append("imageUrl",x),console.log("image:",i.get("imageUrl"));let s=await fetch(`/api/user/${e?._id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:i}),o=await s.json();s.ok?(console.log("Profil uppdaterad",o),A("Profil uppdaterad"),localStorage.setItem("user",JSON.stringify(o)),r(o)):(console.log("N\xe5got gick fel",o),A(o.message||"N\xe5got gick fel")),j(!0)}catch(e){console.error("Fel vid uppdatering:",e),A("N\xe5got gick fel"),j(!0)}};return(0,s.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column"},component:"form",onSubmit:q,children:[(0,s.jsx)(a.A,{container:!0,spacing:3,sx:{flexDirection:"column",rowGap:2,alignItems:"flex-start",paddingLeft:3},children:(0,s.jsx)(a.A,{children:(0,s.jsx)("h1",{children:"Redigera profil"})})}),(0,s.jsxs)(o.A,{sx:{padding:3,flex:1,width:"100%",display:"flex",flexDirection:"row",columnGap:12},children:[(0,s.jsxs)(a.A,{container:!0,spacing:3,sx:{flexDirection:"column",rowGap:2,alignItems:"flex-start"},children:[(0,s.jsx)(a.A,{children:(0,s.jsx)(n.A,{fullWidth:!0,label:"E-post",name:"email",value:t.email,required:!0,sx:{backgroundColor:"#f0f0f0"}})}),(0,s.jsx)(a.A,{children:(0,s.jsx)(n.A,{fullWidth:!0,label:"F\xf6rnamn",name:"firstName",value:t.firstName,onChange:v,required:!0})}),(0,s.jsx)(a.A,{children:(0,s.jsx)(n.A,{fullWidth:!0,label:"Efternamn",name:"lastName",value:t.lastName,onChange:v,required:!0})}),(0,s.jsx)(a.A,{children:(0,s.jsx)(n.A,{fullWidth:!0,label:"Anv\xe4ndarnamn",name:"userName",value:t.userName,onChange:v,required:!0})})]}),(0,s.jsxs)(a.A,{container:!0,spacing:3,sx:{flexDirection:"column",rowGap:2,alignItems:"flex-start"},children:[(0,s.jsx)(a.A,{children:(0,s.jsx)(n.A,{fullWidth:!0,label:"Nuvarande L\xf6senord",name:"password",type:"password",value:t.password,required:!0,sx:{backgroundColor:"#f0f0f0"}})}),(0,s.jsx)(a.A,{children:(0,s.jsx)(n.A,{fullWidth:!0,label:"Ny L\xf6senord",name:"newPassword",type:"password",value:t.newPassword,onChange:v})}),(0,s.jsx)(a.A,{children:(0,s.jsx)(n.A,{fullWidth:!0,label:"Bekr\xe4fta Nytt L\xf6senord",name:"confirmPassword",type:"password",value:t.confirmPassword,onChange:v})})]}),(0,s.jsxs)(a.A,{container:!0,spacing:3,sx:{flexDirection:"column",marginLeft:"auto",marginRight:10},children:[(0,s.jsx)(l.A,{alt:e?.firstName,src:f||e?.imageUrl||"",sx:{width:250,height:250,objectFit:"cover"}}),(0,s.jsxs)(u.A,{variant:"text",component:"label",fullWidth:!0,children:["Ladda upp bild",(0,s.jsx)("input",{type:"file",hidden:!0,name:"imageUrl",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let r=e.target.files[0];m(r);let t=URL.createObjectURL(r);g(t)}}})]})]})]}),(0,s.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",width:"100%",marginTop:4,columnGap:4,justifyContent:"flex-end"},children:[(0,s.jsx)(a.A,{children:(0,s.jsx)(u.A,{type:"submit",variant:"outlined",color:"primary",fullWidth:!0,sx:{textTransform:"none",fontSize:"1rem"},children:"Spara"})}),(0,s.jsx)(a.A,{children:(0,s.jsx)(u.A,{type:"button",variant:"outlined",color:"primary",fullWidth:!0,onClick:()=>window.location.href="/profile",sx:{textTransform:"none",fontSize:"1rem"},children:"Avbryt"})})]}),(0,s.jsx)(d.A,{open:h,autoHideDuration:3e3,onClose:()=>j(!1),children:(0,s.jsx)(c.A,{severity:y.includes("uppdaterad")?"success":"error",children:y})})]})};i()}catch(e){i(e)}})},6472:e=>{e.exports=require("@opentelemetry/api")},6581:e=>{e.exports=require("@mui/system/spacing")},6670:e=>{e.exports=require("@mui/system/styleFunctionSx")},6831:e=>{e.exports=require("@mui/utils")},6847:e=>{e.exports=require("@mui/utils/getScrollbarSize")},6875:e=>{e.exports=require("@mui/utils/ownerWindow")},7376:e=>{e.exports=require("@mui/utils/useForkRef")},7546:e=>{e.exports=require("@mui/utils/deepmerge")},7616:e=>{e.exports=require("@mui/system/DefaultPropsProvider")},7727:e=>{e.exports=require("react-transition-group")},7769:e=>{e.exports=require("@mui/system/cssVars")},7822:e=>{e.exports=require("@mui/utils/extractEventHandlers")},7910:e=>{e.exports=require("stream")},8080:e=>{e.exports=require("@mui/utils/requirePropFactory")},8190:e=>{e.exports=require("@mui/utils/unsupportedProp")},8215:e=>{e.exports=require("@mui/system/createStyled")},8578:e=>{e.exports=require("@mui/utils/capitalize")},8664:(e,r,t)=>{t.d(r,{X:()=>a});var i=t(4152),s=t(7666),o=t(3123);let a=async()=>{await (0,i.X)();let e=await s.A.find().lean(),r=await o.A.find().populate("author","firstName lastName imageUrl").lean();return console.log("Blogs:",r),console.log("Users:",e),{props:{blogs:JSON.parse(JSON.stringify(r))}}}},8732:e=>{e.exports=require("react/jsx-runtime")},8919:e=>{e.exports=require("@mui/system/RtlProvider")},8967:e=>{e.exports=require("@mui/utils/HTMLElementType")},9021:e=>{e.exports=require("fs")},9101:e=>{e.exports=require("@mui/utils/refType")},9121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9299:(e,r,t)=>{t.d(r,{A:()=>o});var i=t(8905),s=t(8732);let o=(0,i.Ke)((0,s.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},9597:e=>{e.exports=require("@mui/utils/setRef")},9721:e=>{e.exports=require("@mui/utils/elementTypeAcceptingRef")},9823:e=>{e.exports=require("@mui/utils/isMuiElement")},9825:e=>{e.exports=require("prop-types")},9989:e=>{e.exports=require("@mui/system/createTheme")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[616,893,815,909,918,487],()=>t(4799));module.exports=i})();